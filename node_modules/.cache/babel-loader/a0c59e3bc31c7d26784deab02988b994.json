{"ast":null,"code":"import _slicedToArray from\"/Users/bottlecapmedia/Desktop/Applications/oneshotdash/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Header from'../Header/Header';import Calendar from'react-calendar';import'react-calendar/dist/Calendar.css';import Plus from\"./../Assets/plus.svg\";import Minus from\"./../Assets/minus.svg\";/**\n* @author\n* @function Lot_Management\n**/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Lot_Management=function Lot_Management(props){var _useState=useState(new Date()),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState({setDate:new Date().toLocaleDateString()}),_useState4=_slicedToArray(_useState3,2),setDate=_useState4[0],setSetDate=_useState4[1];var _useState5=useState({data:[]}),_useState6=_slicedToArray(_useState5,2),newData=_useState6[0],setNewData=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),hourlyIncrement=_useState8[0],setHourlyIncrement=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),maxIncrement=_useState10[0],setMaxIncrement=_useState10[1];var max_inc=function max_inc(){setMaxIncrement(maxIncrement+1);};var hourly_inc=function hourly_inc(){setHourlyIncrement(hourlyIncrement+1);};var max_dec=function max_dec(){if(maxIncrement===0){}else{setMaxIncrement(maxIncrement-1);}};var hourly_dec=function hourly_dec(){if(hourlyIncrement===0){}else{setHourlyIncrement(hourlyIncrement-1);}};var onchange_=function onchange_(data){setValue(data);setSetDate({setDate:data.toLocaleDateString()});};var onDelete=function onDelete(id){fetch(\"https://osParking.pythonanywhere.com/delete-schedules?id=\".concat(id),{method:'DELETE',mode:'cors',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){console.log('Response:',data);}).catch(function(error){console.error('Error:',error);});setTimeout(function(){window.location.reload();},300);};var onSubmission=function onSubmission(e){e.preventDefault();var send_data={'title':e.target.title.value,'date':setDate.setDate,'start_time':\"\".concat(e.target.startHour.value,\":\").concat(e.target.startMin.value).concat(e.target.dn.value),'exp_time':\"\".concat(e.target.endHour.value,\":\").concat(e.target.endMin.value).concat(e.target.dn.value),'rate_per_hr':e.target.hourlyRate.value,'max_rate':e.target.maxRate.value,'repeats':e.target.repeat.value};// console.log(send_data)\n// The url need to implement a dynamic lot number possibly from the localstorage\nfetch('https://osParking.pythonanywhere.com/schedules?lotnumber=1111',{method:'POST',mode:'cors',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'},body:JSON.stringify(send_data)}).then(function(response){return response.json();}).then(function(data){console.log('Success:',data);}).catch(function(error){console.error('Error:',error);});setTimeout(function(){window.location.reload();},1000);};var location=localStorage.getItem('dashboard_lot');useEffect(function(){fetch(\"https://osParking.pythonanywhere.com/get-schedules?lotnumber=\".concat(location),{method:'GET',mode:'cors',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'}}).then(function(response){return response.json();}).then(function(data){// console.log(data.data)\nsetNewData({data:data.data});}).catch(function(error){console.error('Error:',error);});},[]);console.log(setDate);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{title:'Set Rates'}),/*#__PURE__*/_jsx(\"div\",{className:\"analytical_section rateSection\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"management_holder\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calendar_management\",children:[/*#__PURE__*/_jsx(Calendar,{onChange:onchange_,value:value}),/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:'left',width:'80%',marginBottom:'0px'},children:\"Registered Rates\"}),/*#__PURE__*/_jsx(\"div\",{id:\"rate_settings\",children:newData.data.map(function(value,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"rates_card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rate_card_header\",children:[/*#__PURE__*/_jsx(\"div\",{children:value.title}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Set For: \",value.date]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rates_content\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Starts: \",value.start_time]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Expires: \",value.exp_time]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Rate per hr: $\",value.rpr]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Maximum rate: $\",value.max_rate]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Repeats: \",value.repeats]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rate_delete\",children:/*#__PURE__*/_jsx(\"div\",{className:\"delete_icon\",onClick:function onClick(){onDelete(value.id);},children:\"Delete\"})})]});})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmission,className:\"setting_management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search_wrapper\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"rate_titles\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"title_input\",type:\"text\",name:\"title\",placeholder:\"Weekend Date Rate\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time_slots\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"before_time\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"label_wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startHour\",children:\"Hour\"}),/*#__PURE__*/_jsx(\"input\",{className:\"time_slots_input\",type:\"number\",name:\"startHour\",max:\"12\",min:\"1\",placeholder:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"label_wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startMin\",children:\"Mins\"}),/*#__PURE__*/_jsx(\"input\",{className:\"time_slots_input\",type:\"number\",name:\"startMin\",max:\"59\",min:\"0\",placeholder:\"0\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',width:'8%',height:'30px',alignItems:'center'},children:/*#__PURE__*/_jsx(\"h5\",{children:\"to\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"after_time\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"label_wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"endHour\",children:\"Hour\"}),/*#__PURE__*/_jsx(\"input\",{className:\"time_slots_input\",type:\"number\",name:\"endHour\",max:\"12\",min:\"1\",placeholder:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"label_wrapper\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"endMins\",children:\"Mins\"}),/*#__PURE__*/_jsx(\"input\",{className:\"time_slots_input\",type:\"number\",name:\"endMin\",max:\"59\",min:\"0\",placeholder:\"0\"})]})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"dn\",className:\"day-night\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"AM\"}),/*#__PURE__*/_jsx(\"option\",{children:\"PM\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rates\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"rate_titles\",children:\"Price Per Hour\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"adjustment_btns\",onClick:hourly_dec,children:/*#__PURE__*/_jsx(\"img\",{className:\"icon_increment\",src:Minus,alt:\"minus icon\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"rate_input\",name:\"hourlyRate\",type:\"number\",value:hourlyIncrement})}),/*#__PURE__*/_jsx(\"div\",{className:\"adjustment_btns\",onClick:hourly_inc,children:/*#__PURE__*/_jsx(\"img\",{className:\"icon_increment\",src:Plus,alt:\"Plus icon\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rates\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"rate_titles\",children:\"Maximum Cost\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate_container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"adjustment_btns\",onClick:max_dec,children:/*#__PURE__*/_jsx(\"img\",{className:\"icon_increment\",src:Minus,alt:\"minus icon\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{id:\"rate_input\",name:\"maxRate\",type:\"number\",value:maxIncrement})}),/*#__PURE__*/_jsx(\"div\",{className:\"adjustment_btns\",onClick:max_inc,children:/*#__PURE__*/_jsx(\"img\",{className:\"icon_increment\",src:Plus,alt:\"Plus icon\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rates\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"rate_titles\",children:\"Repeat\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rate_container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"repeat_selection_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"radio_btn\",type:\"radio\",id:\"daily\",name:\"repeat\",defaultValue:\"never\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"daily\",children:\"Never\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repeat_selection_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"radio_btn\",type:\"radio\",id:\"daily\",name:\"repeat\",defaultValue:\"daily\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"daily\",children:\"Daily\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repeat_selection_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"radio_btn\",type:\"radio\",id:\"daily\",name:\"repeat\",defaultValue:\"weekly\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"daily\",children:\"Weekly\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repeat_selection_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"radio_btn\",type:\"radio\",id:\"daily\",name:\"repeat\",defaultValue:\"monthly\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"daily\",children:\"Monthly\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"repeat_selection_container\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"radio_btn\",type:\"radio\",id:\"daily\",name:\"repeat\",defaultValue:\"annually\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"daily\",children:\"Annual\"})]})]})]}),/*#__PURE__*/_jsx(\"input\",{id:\"submit_rates\",type:\"submit\",value:\"Save Rate Present\"})]})]})})]});};export default Lot_Management;","map":{"version":3,"sources":["/Users/bottlecapmedia/Desktop/Applications/oneshotdash/src/Pages/Lot_management.js"],"names":["React","useEffect","useState","Header","Calendar","Lot_Management","props","Date","value","setValue","setDate","toLocaleDateString","setSetDate","data","newData","setNewData","hourlyIncrement","setHourlyIncrement","maxIncrement","setMaxIncrement","max_inc","hourly_inc","max_dec","hourly_dec","onchange_","onDelete","id","fetch","method","mode","headers","then","response","json","console","log","catch","error","setTimeout","window","location","reload","onSubmission","e","preventDefault","send_data","target","title","startHour","startMin","dn","endHour","endMin","hourlyRate","maxRate","repeat","body","JSON","stringify","localStorage","getItem","textAlign","width","marginBottom","map","index","date","start_time","exp_time","rpr","max_rate","repeats","display","justifyContent","height","alignItems","Minus","Plus"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport Header from '../Header/Header'\nimport Calendar from 'react-calendar'\nimport 'react-calendar/dist/Calendar.css';\nimport Plus from './../Assets/plus.svg'\nimport Minus from './../Assets/minus.svg'\n\n/**\n* @author\n* @function Lot_Management\n**/\n\nconst Lot_Management = (props) => {\n    const [value, setValue] = useState(new Date())\n    const [setDate, setSetDate] = useState({\n        setDate: new Date().toLocaleDateString()\n    })\n    const [newData, setNewData] = useState({\n        data: []\n    })\n    const [hourlyIncrement, setHourlyIncrement] = useState(0)\n    const [maxIncrement, setMaxIncrement] = useState(0)\n\n    const max_inc = () =>{\n       setMaxIncrement(maxIncrement + 1)\n    }\n    const hourly_inc = () =>{\n        setHourlyIncrement( hourlyIncrement + 1)\n    }\n    const max_dec = () =>{\n        if(maxIncrement === 0){}else{\n            setMaxIncrement(maxIncrement - 1)}\n     }\n    const hourly_dec = () =>{\n        if(hourlyIncrement === 0){}else{\n            setHourlyIncrement( hourlyIncrement - 1)}\n     }\n    const onchange_ = data =>{\n        setValue(data) \n        setSetDate({\n            setDate: data.toLocaleDateString()\n        })   \n    }\n   \n        const onDelete = (id) =>{\n            fetch(`https://osParking.pythonanywhere.com/delete-schedules?id=${id}`, {\n                method: 'DELETE',\n                mode: 'cors',\n                headers: {\n                    'Access-Control-Allow-Origin':'*',\n                    'Content-Type': 'application/json'\n                },\n            }).then(response => response.json())\n                .then(data => {\n                    console.log('Response:', data);\n                })\n                .catch((error) => {\n                    console.error('Error:', error);\n                });\n                setTimeout(()=>{\n                    window.location.reload()\n                }, 300)\n        }\n    \n    const onSubmission = e =>{\n        e.preventDefault()\n        const send_data = {\n            'title': e.target.title.value, \n            'date': setDate.setDate,\n            'start_time': `${e.target.startHour.value}:${e.target.startMin.value}${e.target.dn.value}`,\n            'exp_time': `${e.target.endHour.value}:${e.target.endMin.value}${e.target.dn.value}`, \n            'rate_per_hr': e.target.hourlyRate.value,\n            'max_rate': e.target.maxRate.value, \n            'repeats': e.target.repeat.value \n        }\n        // console.log(send_data)\n        // The url need to implement a dynamic lot number possibly from the localstorage\n\n\n        fetch('https://osParking.pythonanywhere.com/schedules?lotnumber=1111', {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n                'Access-Control-Allow-Origin':'*',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(send_data)\n        }).then(response => response.json())\n            .then(data => {\n                console.log('Success:', data);\n            })\n            .catch((error) => {\n                console.error('Error:', error);\n            });\n            setTimeout(()=>{\n                window.location.reload()\n            }, 1000)\n    }\n    const location = localStorage.getItem('dashboard_lot')\n    useEffect(()=>{\n        fetch(`https://osParking.pythonanywhere.com/get-schedules?lotnumber=${location}`, {\n            method: 'GET',\n            mode: 'cors',\n            headers: {\n                'Access-Control-Allow-Origin':'*',\n                'Content-Type': 'application/json'\n            },\n        }).then(response => response.json())\n            .then(data => {\n                // console.log(data.data)\n                setNewData({\n                    data: data.data\n                })\n            })\n            .catch((error) => {\n                console.error('Error:', error);\n            });\n\n    }, [])\n\nconsole.log(setDate)\n  return(\n    <div>\n    <Header title={'Set Rates'}/>\n    <div className=\"analytical_section rateSection\">\n        <div className='management_holder'> \n        <div className='calendar_management'>\n            <Calendar onChange={onchange_} value={value}/>\n            <h3 style={{textAlign:'left', width:'80%', marginBottom: '0px'}}>Registered Rates</h3>\n            <div id='rate_settings'> \n            {\n                newData.data.map((value, index)=>{\n                    return(\n                        <div className='rates_card'>\n                            <div className='rate_card_header'>\n                            <div>{value.title}</div>\n                            <div>Set For: {value.date}</div>\n                            </div>\n                            <div className='rates_content'> \n                            <div>Starts: {value.start_time}</div>\n                            <div>Expires: {value.exp_time}</div>\n                            <div>Rate per hr: ${value.rpr}</div>\n                            <div>Maximum rate: ${value.max_rate}</div>\n                            <div>Repeats: {value.repeats}</div>\n                            </div>\n                            <div className='rate_delete'>\n                                <div className='delete_icon' onClick={()=>{onDelete(value.id)}}>Delete</div>\n                            </div>\n                        </div>\n                    )\n                })\n            }       \n            </div>\n\n\n        </div>\n       \n        <form onSubmit={onSubmission} className='setting_management'>\n            <div className='search_wrapper'>\n            <h4 className='rate_titles'>Title</h4>\n            <input className='title_input' type='text' name='title' placeholder='Weekend Date Rate' />\n            </div>\n\n            <div className='time_slots'>\n                <div className='before_time'>\n                    <div className='label_wrapper'>\n                    <label htmlFor='startHour'>Hour</label>\n                    <input className='time_slots_input' type='number' name='startHour' max='12' min='1' placeholder='0'/>\n                    </div>\n                    <div className='label_wrapper'>\n                    <label htmlFor='startMin'>Mins</label>\n                    <input className='time_slots_input' type='number' name='startMin' max='59'min='0' placeholder='0'/>\n                    </div>\n                    \n                </div>\n                <div style={{display: 'flex', justifyContent: 'center', width: '8%',  height: '30px', alignItems: 'center'}}>\n                    <h5>to</h5>\n                </div>\n                <div className='after_time'>\n                    <div className='label_wrapper'>\n                    <label htmlFor='endHour'>Hour</label>\n                    <input className='time_slots_input' type='number' name='endHour' max='12' min='1' placeholder='0'/>\n                    </div>\n\n                <div className='label_wrapper'>\n                <label htmlFor='endMins'>Mins</label>\n                <input className='time_slots_input' type='number' name='endMin' max='59' min='0' placeholder='0'/>\n                </div>\n                </div>\n                <select name='dn' className='day-night'>\n                    <option>AM</option>\n                    <option>PM</option>\n                </select>\n            </div>\n\n            <div className='rates'> \n            <h4 className='rate_titles'>Price Per Hour</h4>\n            <div className='rate_container'>\n                <div className='adjustment_btns' onClick={hourly_dec}><img className='icon_increment' src={Minus} alt='minus icon'></img></div>\n                <div><input id='rate_input' name='hourlyRate' type='number' value={hourlyIncrement} /></div>\n                <div className='adjustment_btns' onClick={hourly_inc}><img className='icon_increment' src={Plus} alt='Plus icon'></img></div>\n            </div>\n            </div>\n\n            <div className='rates'> \n            <h4 className='rate_titles'>Maximum Cost</h4>\n            <div className='rate_container'>\n                <div className='adjustment_btns' onClick={max_dec} ><img className='icon_increment' src={Minus} alt='minus icon'></img></div>\n                <div><input id='rate_input' name='maxRate' type='number' value={maxIncrement} /></div>\n                <div className='adjustment_btns' onClick={max_inc}><img className='icon_increment' src={Plus} alt='Plus icon'></img></div>\n            </div>\n            </div>\n\n\n            <div className='rates'> \n            <h4 className='rate_titles'>Repeat</h4>\n            <div className='rate_container'>\n                <div className='repeat_selection_container'>\n                    \n                    <input className='radio_btn' type='radio' id='daily' name='repeat' defaultValue='never' />\n                    <label htmlFor='daily'>Never</label>\n                </div>\n                <div className='repeat_selection_container'>     \n                    <input className='radio_btn' type='radio' id='daily' name='repeat' defaultValue='daily' />\n                    <label htmlFor='daily'>Daily</label>\n                </div>\n                <div className='repeat_selection_container'>         \n                    <input className='radio_btn' type='radio' id='daily' name='repeat' defaultValue='weekly' />\n                    <label htmlFor='daily'>Weekly</label>\n                </div>\n                <div className='repeat_selection_container'>\n                    <input className='radio_btn' type='radio' id='daily' name='repeat' defaultValue='monthly' />\n                    <label htmlFor='daily'>Monthly</label>\n                </div>\n                <div className='repeat_selection_container'>\n                    <input className='radio_btn' type='radio' id='daily' name='repeat' defaultValue='annually' />\n                    <label htmlFor='daily'>Annual</label>\n                </div>\n            </div>\n            </div>\n\n            <input id='submit_rates' type='submit' value='Save Rate Present'/>\n            \n        </form>\n        </div>\n    </div>\n  </div>\n   )\n\n }\n\nexport default Lot_Management"]},"metadata":{},"sourceType":"module"}